(self.webpackChunk=self.webpackChunk||[]).push([[2594],{2743:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>y});var a=l(6252),u=l(3577);const i={key:0},n={key:1},s={key:0,class:"label"},o={class:"flex space-x-1.5 items-center"},c={key:5,class:"flex space-x-1.5 items-center"};var r=l(9669),p=l.n(r),h=l(7890),d=l(296);const m={mixins:[h.Z],data:()=>({inputs:[],should:0,has:0,load:null}),methods:{optionSelected(e,t){let l=this.sanitizeValue(this.getValue(e));return t=this.sanitizeValue(t),Array.isArray(l)?l.includes(t):l==t},getValue(e){return null===e.key?this.modelValue||e.value||null:this.modelValue?this.modelValue[e.key]||e.value||null:e.value||null},setSelectValue(e,t){let l=null;e.multiple?(l=[],"select"==e.type?Array.from(t.target.options).forEach(((e,t)=>{e.selected&&(""===e.value?l.push(null):l.push(e.value))})):"checkbox"==e.type&&(l=this.getValue(e),Array.isArray(l)||(l=[]),t.target.checked?l.push(t.target.value):l=l.filter((e=>e!==t.target.value)))):(l=t.target.value,""===l&&(l=null)),this.setValue(e,l)},setValue(e,t){if(this.isNumeric(t)&&(t=parseInt(t)),t=this.sanitizeValue(t),null===e.key)this.$emit("update:modelValue",t);else{let l=this.modelValue;l&&"object"==typeof l&&l.constructor===Object||(l={}),l[e.key]=t,this.$emit("update:modelValue",l)}},isNumeric:e=>!isNaN(parseFloat(e))&&isFinite(e),sanitizeValue(e){return this.isNumeric(e)?parseInt(e):e}},created(){const e=(0,d.debounce)(((e={})=>{if(this.options.route_name){try{this.route(this.options.route_name)}catch(e){return void new this.$notification(this.__("voyager::formfields.dynamic_input.route_warning",{route:this.options.route_name})).color("red").timeout().show()}p().post(this.route(this.options.route_name),{...this.modelValue,bread_action:this.action,data:e}).then((e=>{this.inputs=e.data,e.data.forEach((e=>{if(e.key){var t=this.modelValue;t&&"object"==typeof t&&t.constructor===Object||(t={}),t.hasOwnProperty(e.key)||(t[e.key]=e.value,this.$emit("update:modelValue",t))}else null===this.modelValue&&e.value&&this.$emit("update:modelValue",e.value)}))})).catch((e=>{}))}}),this.options.debounce||200,!1);this.$watch((()=>this.modelValue),(()=>{e()}),{immediate:!0,deep:!0}),this.$watch((()=>this.options.route_name),((t,l)=>{t!==l&&e()})),this.$eventbus.on("output",(e=>{}))},render:function(e,t,l,r,p,h){return"query"==e.action?((0,a.wg)(),(0,a.j4)("div",i)):"browse"==e.action?((0,a.wg)(),(0,a.j4)("div",n)):"edit"==e.action||"add"==e.action?((0,a.wg)(),(0,a.j4)("div",{key:2,class:["w-full",e.options.inline?"flex space-x-4":"space-y-4"]},[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(p.inputs,((t,l)=>((0,a.wg)(),(0,a.j4)("div",{class:["w-full",e.options.outline?"input-group":null]},[t.title?((0,a.wg)(),(0,a.j4)("label",s,(0,u.zw)(t.title),1)):(0,a.kq)("v-if",!0),"select"==t.type?((0,a.wg)(),(0,a.j4)("select",{key:1,class:"input mt-2 w-full",onChange:e=>h.setSelectValue(t,e),multiple:t.multiple,id:`input-${e.column.column}-${l}`},[((0,a.wg)(!0),(0,a.j4)(a.HY,null,(0,a.Ko)(t.options,((e,l)=>((0,a.wg)(),(0,a.j4)("option",{value:l,selected:h.optionSelected(t,l)},(0,u.zw)(e),9,["value","selected"])))),256))],40,["onChange","multiple","id"])):"text"==t.type?((0,a.wg)(),(0,a.j4)("input",{key:2,type:"text",class:"input mt-2 w-full",value:h.getValue(t),onInput:e=>h.setValue(t,e.target.value),placeholder:t.placeholder||""},null,40,["value","onInput","placeholder"])):"number"==t.type?((0,a.wg)(),(0,a.j4)("input",{key:3,type:"number",class:"input mt-2 w-full",value:h.getValue(t),onInput:e=>h.setValue(t,e.target.value),placeholder:t.placeholder||"",min:t.min,max:t.max},null,40,["value","onInput","placeholder","min","max"])):"checkbox"==t.type||"radio"==t.type?((0,a.wg)(!0),(0,a.j4)(a.HY,{key:4},(0,a.Ko)(t.options,((l,i)=>((0,a.wg)(),(0,a.j4)("div",o,[(0,a.Wm)("input",{type:t.type,class:"input",value:i,onChange:e=>h.setSelectValue(t,e),id:`${e.column.column}-${i}`,name:`${e.column.column}-${t.key}`,checked:h.optionSelected(t,i)},null,40,["type","value","onChange","id","name","checked"]),(0,a.Wm)("label",{for:`${e.column.column}-${i}`,class:"label"},(0,u.zw)(l),9,["for"])])))),256)):"switch"==t.type?((0,a.wg)(),(0,a.j4)("div",c,[(0,a.Wm)("input",{type:"checkbox",class:"input",onChange:e=>h.setValue(t,e.target.checked),id:`${e.column.column}-${t.key}`,checked:h.getValue(t)},null,40,["onChange","id","checked"]),(0,a.Wm)("label",{for:`${e.column.column}-${t.key}`,class:"label"},(0,u.zw)(t.title),9,["for"])])):(0,a.kq)("v-if",!0)],2)))),256))],2)):(0,a.kq)("v-if",!0)}},y=m}}]);