(self.webpackChunk=self.webpackChunk||[]).push([[4486],{579:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>w});var s=o(6252),i=o(3577);const l={key:0},a={key:2,class:"w-full"},n={class:"flex space-x-1"},r={class:"button small dd-handle cursor-move"},d={key:3,class:"flex flex-wrap space-x-1"};var u=o(9980),m=o.n(u),c=o(4586),h=o(7890),p=o(5117);const f={mixins:[h.Z],components:{EditAdd:p.Z,draggable:m()},computed:{rows:{get(){return this.modelValue},set(e){this.$emit("update:modelValue",e)}},browseData(){if(Array.isArray(this.modelValue)){if(0==this.modelValue.length)return this.__("voyager::generic.none");{let e="",t=this.modelValue,o=this.modelValue.length,s=this.options.rows||3;return this.options.shuffle&&t.sort((()=>Math.random()-.5)),t.splice(0,t.length-s),e=t[0]&&"object"==typeof t[0]&&t[0].constructor===Object?t.map((e=>Object.keys(e).map((t=>this.titleCase(t)+": "+e[t])).join(", ").substr(0,this.options.length||15))).join("<br>"):t.map((e=>"string"==typeof e||e instanceof String?e.substr(0,this.options.length||15):e)).join("<br>"),o>s&&(e+='<p class="italic text-sm">'+this.__("voyager::generic.more_results",{num:o-s})+"</p>"),e}}return this.modelValue}},methods:{setData(e,t){let o=this.modelValue;o[e]=t,this.$emit("update:modelValue",o)},addRow(){this.$emit("update:modelValue",[...this.modelValue,{}])},deleteRow(e){let t=this.modelValue;t.splice(e,1),this.$emit("update:modelValue",t)},keyForRow:e=>(0,c.Z)()},created(){if(!this.options.formfields)return;let e=!1;this.options.formfields.forEach((t=>{null!==t.column.column&&""!==t.column.column||(e=!0)})),e&&this.options.formfields.length>1&&new this.$notification(this.__("voyager::formfields.repeater.key_warning")).color("red").timeout().show()},data(){return{bread:{name_singular:""},layout:{formfields:this.options.formfields}}},render:function(e,t,o,u,m,c){const h=(0,s.up)("icon"),p=(0,s.up)("edit-add"),f=(0,s.up)("card"),w=(0,s.up)("draggable");return"query"==e.action?((0,s.wg)(),(0,s.j4)("div",l,[(0,s.WI)(e.$slots,"default")])):"browse"==e.action?((0,s.wg)(),(0,s.j4)("div",{key:1,innerHTML:c.browseData},null,8,["innerHTML"])):"edit"==e.action||"add"==e.action?((0,s.wg)(),(0,s.j4)("div",a,[(0,s.Wm)(w,{list:c.rows,"item-key":c.keyForRow,handle:".dd-handle"},{item:(0,s.w5)((({element:e,index:t})=>[(0,s.Wm)(f,{title:`${this.translate(this.options.type,!0)||""} #${t+1}`,titleSize:6},{actions:(0,s.w5)((()=>[(0,s.Wm)("div",n,[(0,s.Wm)("button",r,[(0,s.Wm)(h,{icon:"arrows-expand"})]),(0,s.Wm)("button",{class:"button small red",onClick:e=>c.deleteRow(t)},[(0,s.Wm)(h,{icon:"trash"})],8,["onClick"])])])),default:(0,s.w5)((()=>[(0,s.Wm)(p,{"from-repeater":"",bread:m.bread,layout:m.layout,input:e,onOutput:e=>c.setData(t,e),action:"add"},null,8,["bread","layout","input","onOutput"])])),_:2},1032,["title"])])),_:1},8,["list","item-key"]),(0,s.Wm)("button",{class:"button green w-full justify-center",onClick:t[1]||(t[1]=(...e)=>c.addRow&&c.addRow(...e))},[(0,s.Wm)(h,{icon:"plus-circle"}),(0,s.Wm)("span",null,(0,i.zw)(e.__("voyager::generic.add_type",{type:this.translate(this.options.type,!0)||""})),1)])])):((0,s.wg)(),(0,s.j4)("div",d))}},w=f}}]);