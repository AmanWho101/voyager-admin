(self.webpackChunk=self.webpackChunk||[]).push([[2366,5557],{1611:(e,l,o)=>{"use strict";o.r(l),o.d(l,{default:()=>U});var t=o(6252),i=o(3577),n=o(9963);const s={class:"flex space-x-1"},a={class:"button small dd-handle cursor-move"},p={key:0,class:"input-group mt-2"},r={class:"label mt-4"},u={key:1,class:"input-group mt-2"},m={class:"label"},d={key:2,class:"input-group mt-2"},c={class:"label mt-4"},f={class:"input-group mt-2"},w={class:"label mt-4"},g={class:"input-group mt-2"},y={class:"label mt-4"},h={class:"input-group mt-2"},v={class:"label mt-4"},_={class:"input-group mt-2"},b={class:"label mt-4"},W={class:"button small"},k={key:0,class:"description"};var V=o(9980),z=o.n(V);const j={components:{BreadBuilderValidation:o(1738).Z,draggable:z()},emits:["delete","update:formfields","update:options"],props:{computed:Array,columns:Array,relationships:Array,formfields:Array,options:Object,fromRepeater:{type:Boolean,default:!1}},data:()=>({resizingFormfield:null,sizes:["w-1/6","w-2/6","w-3/6","w-4/6","w-5/6","w-full"]}),methods:{startResize(e){this.resizingFormfield=e},prev(e){this.$emit("update:formfields",this.formfields.moveElementUp(e))},next(e){this.$emit("update:formfields",this.formfields.moveElementDown(e))}},mounted(){window.addEventListener("mouseup",(()=>{this.resizingFormfield=null})),this.$el.addEventListener("mousemove",(e=>{if(null!==this.resizingFormfield){e.preventDefault();var l=this.$el.getBoundingClientRect(),o=e.clientX-l.left-50,t=l.width/(this.sizes.length-1),i=Math.min(Math.max(Math.ceil(o/t),0),this.sizes.length);this.formfields[this.resizingFormfield].options.width=this.sizes[i]}}))},render:function(e,l,o,V,z,j){const U=(0,t.up)("icon"),x=(0,t.up)("locale-picker"),B=(0,t.up)("language-input"),F=(0,t.up)("breadBuilderValidation"),q=(0,t.up)("slide-in"),$=(0,t.up)("card"),H=(0,t.up)("draggable"),T=(0,t.Q2)("tooltip");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)(H,{class:"flex flex-wrap w-full min-h-64",modelValue:o.formfields,"onUpdate:modelValue":l[1]||(l[1]=l=>e.$emit("update:formfields",l)),"item-key":"",group:"view-builder-dd",handle:".dd-handle"},{item:(0,t.w5)((({element:l,index:V})=>[(0,t.Wm)("div",{class:["m-0",l.options.width],uses:"w-1/6 w-2/6 w-3/6 w-4/6 w-5/6 w-full"},[(0,t.Wm)($,{title:e.translate(l.options.title)||"","title-size":5},{actions:(0,t.w5)((()=>[(0,t.Wm)("div",s,[(0,t.wy)((0,t.Wm)("button",a,[(0,t.Wm)(U,{icon:"arrows-expand"})],512),[[T,e.__("voyager::generic.move")]]),(0,t.wy)((0,t.Wm)("button",{class:"button small",onMousedown:e=>j.startResize(V)},[(0,t.Wm)(U,{icon:"switch-horizontal",class:"cursor-move"})],40,["onMousedown"]),[[T,e.__("voyager::builder.resize")]]),(0,t.Wm)(q,{title:e.__("voyager::generic.options")},{actions:(0,t.w5)((()=>[(0,t.Wm)(x)])),opener:(0,t.w5)((()=>[(0,t.Wm)("button",W,[(0,t.Wm)(U,{icon:"cog"})])])),default:(0,t.w5)((()=>[o.fromRepeater?((0,t.wg)(),(0,t.j4)("div",u,[(0,t.Wm)("label",m,(0,i.zw)(e.__("voyager::generic.key")),1),(0,t.wy)((0,t.Wm)("input",{class:"input w-full",type:"text",placeholder:e.__("voyager::generic.key"),"onUpdate:modelValue":e=>l.column.column=e},null,8,["placeholder","onUpdate:modelValue"]),[[n.nr,l.column.column]])])):((0,t.wg)(),(0,t.j4)("div",p,[(0,t.Wm)("label",r,(0,i.zw)(e.__("voyager::generic.column")),1),(0,t.kq)(" TODO: Hide this if formfield doesn't allow any kind of column "),(0,t.wy)((0,t.Wm)("select",{class:"input w-full","onUpdate:modelValue":e=>l.column=e},[e.getFormfieldByType(l.type).allow_columns?((0,t.wg)(),(0,t.j4)("optgroup",{key:0,label:e.__("voyager::builder.columns")},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.columns,((e,l)=>((0,t.wg)(),(0,t.j4)("option",{key:"column_"+l,value:{column:e,type:"column"}},(0,i.zw)(e),9,["value"])))),128))],8,["label"])):(0,t.kq)("v-if",!0),e.getFormfieldByType(l.type).allow_computed_props?((0,t.wg)(),(0,t.j4)("optgroup",{key:1,label:e.__("voyager::builder.computed")},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.computed,((e,l)=>((0,t.wg)(),(0,t.j4)("option",{key:"computed_"+l,value:{column:e,type:"computed"}},(0,i.zw)(e),9,["value"])))),128))],8,["label"])):(0,t.kq)("v-if",!0),((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.relationships,((o,n)=>((0,t.wg)(),(0,t.j4)(t.HY,{key:"relationship_"+n},[e.getFormfieldByType(l.type).allow_relationship_props?((0,t.wg)(),(0,t.j4)("optgroup",{key:0,label:o.method},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.columns,((e,l)=>((0,t.wg)(),(0,t.j4)("option",{key:"column_"+l,value:{column:o.method+"."+e,type:"relationship"}},(0,i.zw)(e),9,["value"])))),128)),((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.pivot,((n,s)=>((0,t.wg)(),(0,t.j4)(t.HY,{key:"pivot_"+s},[e.getFormfieldByType(l.type).allow_relationship_pivots?((0,t.wg)(),(0,t.j4)("option",{key:0,value:{column:o.method+".pivot."+n,type:"relationship"}}," pivot."+(0,i.zw)(n),9,["value"])):(0,t.kq)("v-if",!0)],64)))),128))],8,["label"])):(0,t.kq)("v-if",!0)],64)))),128)),e.getFormfieldByType(l.type).allow_relationship_props?((0,t.wg)(),(0,t.j4)("optgroup",{key:2,label:e.__("voyager::generic.relationships")},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.relationships,((e,l)=>((0,t.wg)(),(0,t.j4)("option",{key:"relationship_"+l,value:{column:e.method,type:"relationship"}},(0,i.zw)(e.method),9,["value"])))),128))],8,["label"])):(0,t.kq)("v-if",!0)],8,["onUpdate:modelValue"]),[[n.bM,l.column]])])),e.getFormfieldByType(l.type).can_be_translated?((0,t.wg)(),(0,t.j4)("div",d,[(0,t.Wm)("label",c,(0,i.zw)(e.__("voyager::generic.translatable")),1),(0,t.wy)((0,t.Wm)("input",{type:"checkbox",class:"input","onUpdate:modelValue":e=>l.translatable=e},null,8,["onUpdate:modelValue"]),[[n.e8,l.translatable]])])):(0,t.kq)("v-if",!0),(0,t.Wm)("div",f,[(0,t.Wm)("label",w,(0,i.zw)(e.__("voyager::generic.component")),1),(0,t.wy)((0,t.Wm)("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>l.component=e},null,8,["onUpdate:modelValue"]),[[n.nr,l.component]])]),(0,t.Wm)("div",g,[(0,t.Wm)("label",y,(0,i.zw)(e.__("voyager::generic.title")),1),(0,t.Wm)(B,{class:"input w-full",type:"text",placeholder:e.__("voyager::generic.title"),modelValue:l.options.title,"onUpdate:modelValue":e=>l.options.title=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),(0,t.Wm)("div",h,[(0,t.Wm)("label",v,(0,i.zw)(e.__("voyager::generic.description")),1),(0,t.Wm)(B,{class:"input w-full",type:"text",placeholder:e.__("voyager::generic.description"),modelValue:l.options.description,"onUpdate:modelValue":e=>l.options.description=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),((0,t.wg)(),(0,t.j4)((0,t.LL)(e.getFormfieldByType(l.type).builder_component),{options:l.options,"onUpdate:options":e=>l.options=e,column:l.column,columns:o.columns,relationships:o.relationships,action:"view-options"},null,8,["options","onUpdate:options","column","columns","relationships"])),(0,t.Wm)("div",_,[(0,t.Wm)("label",b,(0,i.zw)(e.__("voyager::generic.classes")),1),(0,t.wy)((0,t.Wm)("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>l.options.classes=e},null,8,["onUpdate:modelValue"]),[[n.nr,l.options.classes]])]),(0,t.Wm)(F,{modelValue:l.validation,"onUpdate:modelValue":e=>l.validation=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["title"]),(0,t.Wm)("button",{class:"button small red",onClick:l=>e.$emit("delete",V)},[(0,t.Wm)(U,{icon:"trash"})],8,["onClick"])])])),default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(e.getFormfieldByType(l.type).builder_component),{options:l.options,class:l.options.classes,column:l.column,columns:o.columns,action:"view"},null,8,["options","class","column","columns"])),""!==e.translate(l.options.description)?((0,t.wg)(),(0,t.j4)("p",k,(0,i.zw)(e.translate(l.options.description)),1)):(0,t.kq)("v-if",!0)])),_:2},1032,["title"])],2)])),_:1},8,["modelValue"])])}},U=j},7789:(e,l,o)=>{"use strict";o.r(l),o.d(l,{default:()=>W});var t=o(6252),i=o(3577),n=o(9963);const s={key:0},a={class:"input-group mt-2"},p={class:"label mt-4"},r={class:"input-group mt-2"},u={class:"label mt-4"},m={key:1},d={class:"input-group mt-2"},c={class:"label mt-4"},f={class:"input-group mt-2"},w={class:"label mt-4"},g={class:"input-group mt-2"},y={class:"label mt-4"},h={key:2,class:"w-full"};var v=o(7766),_=o(1611);const b={mixins:[v.Z],components:{BreadBuilderView:_.default},computed:{defaultViewOptions:()=>({formfields:[],type:"",sort:!0}),defaultListOptions:()=>({rows:3,length:15,shuffle:!1}),formfields:{get(){return this.options.formfields||[]},set(e){let l=this.options;l.formfields=e,this.$emit("update:options",l)}}},methods:{deleteFormfield(e){new this.$notification(this.__("voyager::builder.delete_formfield_confirm")).color("yellow").timeout().confirm().show().then((l=>{if(l){let l=this.options,o=this.options.formfields;o.splice(e,1),l.formfields=o,this.$emit("update:options",l)}}))}},created(){this.$watch((()=>this.options.formfields),(e=>{if(!Array.isArray(e))return;let l=!1;e.forEach((e=>{null!==e.column.column&&""!==e.column.column||(l=!0)})),this.keyWarning=l&&this.options.formfields.length>1}),{immediate:!0,deep:!0})},data:()=>({dummyOptions:[],keyWarning:!1}),render:function(e,l,o,v,_,b){const W=(0,t.up)("language-input"),k=(0,t.up)("alert"),V=(0,t.up)("bread-builder-view"),z=(0,t.up)("card");return"view-options"==e.action?((0,t.wg)(),(0,t.j4)("div",s,[(0,t.Wm)("div",a,[(0,t.Wm)("label",p,(0,i.zw)(e.__("voyager::generic.type")),1),(0,t.Wm)(W,{class:"input w-full",type:"text",placeholder:e.__("voyager::generic.type"),modelValue:e.options.type,"onUpdate:modelValue":l[1]||(l[1]=l=>e.options.type=l)},null,8,["placeholder","modelValue"])]),(0,t.Wm)("div",r,[(0,t.Wm)("label",u,(0,i.zw)(e.__("voyager::formfields.repeater.allow_sort")),1),(0,t.wy)((0,t.Wm)("input",{type:"checkbox",class:"input","onUpdate:modelValue":l[2]||(l[2]=l=>e.options.sort=l)},null,512),[[n.e8,e.options.sort]])])])):"list-options"==e.action?((0,t.wg)(),(0,t.j4)("div",m,[(0,t.Wm)("div",d,[(0,t.Wm)("label",c,(0,i.zw)(e.__("voyager::generic.rows")),1),(0,t.wy)((0,t.Wm)("input",{class:"input w-full",type:"number",min:"0",placeholder:e.__("voyager::generic.rows"),"onUpdate:modelValue":l[3]||(l[3]=l=>e.options.rows=l)},null,8,["placeholder"]),[[n.nr,e.options.rows,void 0,{number:!0}]])]),(0,t.Wm)("div",f,[(0,t.Wm)("label",w,(0,i.zw)(e.__("voyager::formfields.repeater.chars_per_rows")),1),(0,t.wy)((0,t.Wm)("input",{class:"input w-full",type:"number",min:"0",placeholder:e.__("voyager::formfields.repeater.chars_per_rows"),"onUpdate:modelValue":l[4]||(l[4]=l=>e.options.length=l)},null,8,["placeholder"]),[[n.nr,e.options.length,void 0,{number:!0}]])]),(0,t.Wm)("div",g,[(0,t.Wm)("label",y,(0,i.zw)(e.__("voyager::formfields.repeater.shuffle_rows")),1),(0,t.wy)((0,t.Wm)("input",{type:"checkbox",class:"input","onUpdate:modelValue":l[5]||(l[5]=l=>e.options.shuffle=l)},null,512),[[n.e8,e.options.shuffle]])])])):"view"==e.action?((0,t.wg)(),(0,t.j4)("div",h,[_.keyWarning?((0,t.wg)(),(0,t.j4)(k,{key:0,color:"yellow",class:"mb-2"},{default:(0,t.w5)((()=>[(0,t.Uk)((0,i.zw)(e.__("voyager::formfields.repeater.key_warning")),1)])),_:1})):(0,t.kq)("v-if",!0),(0,t.Wm)(z,null,{default:(0,t.w5)((()=>[(0,t.Wm)(V,{computed:[],columns:[],relationships:[],formfields:b.formfields,"onUpdate:formfields":l[6]||(l[6]=e=>b.formfields=e),options:_.dummyOptions,"onUpdate:options":l[7]||(l[7]=e=>_.dummyOptions=e),onDelete:l[8]||(l[8]=e=>b.deleteFormfield(e)),"from-repeater":""},null,8,["formfields","options"])])),_:1})])):(0,t.kq)("v-if",!0)}},W=b}}]);