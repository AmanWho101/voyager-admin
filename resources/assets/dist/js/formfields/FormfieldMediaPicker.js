(self.webpackChunk=self.webpackChunk||[]).push([[3076],{860:(e,l,s)=>{"use strict";s.r(l),s.d(l,{default:()=>T});var i=s(6252),t=s(3577),a=s(9963);const o={key:1},n={key:0,class:"flex items-center space-x-1"},m={key:0,class:"italic text-sm"},d={key:1},c=(0,i.Wm)("br",null,null,-1),r={key:0,class:"italic text-sm"},u={key:2,class:"w-full"},p={class:"flex-grow grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},f={class:"flex p-3"},w={class:"flex-none"},g={class:"w-full flex justify-center"},h={key:1,class:"w-full flex justify-center h-24"},v={class:"flex-grow ml-3 overflow-hidden"},y={class:"flex flex-col h-full"},x={class:"flex-none"},W={class:"w-full flex"},k={class:"flex-grow"},j={class:"whitespace-nowrap"},_={class:"flex-grow-0"},V={class:"item w-full rounded-md border cursor-pointer select-none h-auto"},b={class:"flex p-3"},z={class:"flex-none"},U={class:"w-full flex justify-center"},M={class:"w-full flex justify-center h-24"},H={class:"flex items-center"},I={key:3},K={class:"flex-grow grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4"},Y={class:"flex p-3"},A={class:"flex-none"},C={class:"w-full flex justify-center"},$={key:1,class:"w-full flex justify-center h-24"},q={class:"ml-3 overflow-hidden"},E={class:"whitespace-nowrap"};var F=s(7890),Z=s(9868);const Q={mixins:[F.Z],computed:{value:{get(){return this.isArray(this.modelValue)?this.modelValue:[]},set(e){if(this.options.max>0&&this.value.length>=this.options.max){if(1!==this.options.max)return void new this.$notification(this.trans_choice("voyager::formfields.media_picker.max_warning",this.options.max)).color("yellow").timeout().show();var l=e.filter((e=>!this.modelValue.includes(e))).first();e=[l]}if(this.isArray(this.options.meta)){var s=this.options.meta;e.map((e=>{e.meta={},s.forEach((l=>{e.meta[l.key]=""}))}))}this.$emit("update:modelValue",e)}},slicedItems(){var e=(this.modelValue||[]).slice(0,this.options.items||3);return!0===this.options.shuffle?e.shuffle():e}},methods:{matchMime:Z.Z,removeFile(e){this.isArray(this.modelValue)&&this.modelValue.forEach(((l,s)=>{l.disk==e.disk&&e.relative_path==l.relative_path&&l.name==e.name&&this.$emit("update:modelValue",this.modelValue.removeAtIndex(s))}))}},render:function(e,l,s,F,Z,Q){const T=(0,i.up)("icon"),B=(0,i.up)("language-input"),D=(0,i.up)("media-manager"),G=(0,i.up)("modal"),J=(0,i.Q2)("tooltip");return"query"==e.action?(0,i.WI)(e.$slots,"default",{key:0}):"browse"==e.action?((0,i.wg)(),(0,i.j4)("div",o,[!0===e.options.icons?((0,i.wg)(),(0,i.j4)("div",n,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(Q.slicedItems,((e,l)=>((0,i.wg)(),(0,i.j4)("div",{key:l},[(0,i.wy)((0,i.Wm)("div",null,[Q.matchMime(e.type,"image/*")?((0,i.wg)(),(0,i.j4)("img",{key:0,src:e.url,class:"rounded-lg object-contain h-16 max-w-full"},null,8,["src"])):((0,i.wg)(),(0,i.j4)(T,{key:1,icon:"document",size:"16"}))],512),[[J,e.relative_path+e.name]])])))),128)),e.modelValue.length>e.options.display?((0,i.wg)(),(0,i.j4)("span",m,(0,t.zw)(e.__("voyager::generic.more_results",{num:e.modelValue.length-e.options.display})),1)):(0,i.kq)("v-if",!0)])):((0,i.wg)(),(0,i.j4)("div",d,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(Q.slicedItems,((e,l)=>((0,i.wg)(),(0,i.j4)("span",{key:l},[(0,i.Uk)((0,t.zw)(e.name)+"b",1),c])))),128)),e.modelValue.length>e.options.display?((0,i.wg)(),(0,i.j4)("span",r,(0,t.zw)(e.__("voyager::generic.more_results",{num:e.modelValue.length-e.options.display})),1)):(0,i.kq)("v-if",!0)]))])):"edit"==e.action||"add"==e.action?((0,i.wg)(),(0,i.j4)("div",u,[(0,i.Wm)("div",p,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.modelValue,((l,s)=>((0,i.wg)(),(0,i.j4)("div",{key:s,class:"item w-full rounded-md border cursor-pointer select-none h-auto"},[(0,i.Wm)("div",f,[(0,i.Wm)("div",w,[(0,i.Wm)("div",g,[Q.matchMime(l.type,"image/*")?((0,i.wg)(),(0,i.j4)("img",{key:0,src:l.url,class:"rounded object-contain h-24 max-w-full"},null,8,["src"])):((0,i.wg)(),(0,i.j4)("div",h,[(0,i.Wm)(T,{icon:"document",size:"24"})]))])]),(0,i.Wm)("div",v,[(0,i.Wm)("div",y,[(0,i.Wm)("div",x,[(0,i.Wm)("div",W,[(0,i.wy)((0,i.Wm)("div",k,[(0,i.Wm)("p",j,(0,t.zw)(l.name),1)],512),[[J,l.name]]),(0,i.Wm)("div",_,[(0,i.Wm)("button",{onClick:(0,a.iM)((e=>Q.removeFile(l)),["stop"]),class:"h-5 w-5"},[(0,i.Wm)(T,{icon:"x",size:4})],8,["onClick"])])]),((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.options.meta,((s,t)=>((0,i.wg)(),(0,i.j4)("div",{key:t,class:"mt-1"},[(0,i.Wm)(B,{class:"input w-full small",type:"text",placeholder:e.translate(s.value,!0),modelValue:l.meta[s.key],"onUpdate:modelValue":e=>l.meta[s.key]=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])])))),128))])])])])])))),128)),(0,i.Wm)(G,{title:e.translate(e.options.select_text||e.__("voyager::media.select_upload_files"),!0),size:"full"},{opener:(0,i.w5)((()=>[(0,i.Wm)("div",V,[(0,i.Wm)("div",b,[(0,i.Wm)("div",z,[(0,i.Wm)("div",U,[(0,i.Wm)("div",M,[(0,i.Wm)(T,{icon:"plus-circle",size:24})])])]),(0,i.Wm)("div",H,[(0,i.Wm)("h6",null,(0,t.zw)(e.translate(e.options.select_text||e.__("voyager::media.select_upload_files"),!0)),1)])])])])),default:(0,i.w5)((()=>[(0,i.Wm)(D,{modelValue:Q.value,"onUpdate:modelValue":l[1]||(l[1]=e=>Q.value=e),uploadUrl:e.route("voyager.media.upload"),listUrl:e.route("voyager.media.list"),allowedMimeTypes:[]},null,8,["modelValue","uploadUrl","listUrl"])])),_:1},8,["title"])])])):((0,i.wg)(),(0,i.j4)("div",I,[(0,i.Wm)("div",K,[((0,i.wg)(!0),(0,i.j4)(i.HY,null,(0,i.Ko)(e.modelValue,((e,l)=>((0,i.wg)(),(0,i.j4)("div",{key:l,class:"item w-full rounded-md border cursor-pointer select-none h-auto"},[(0,i.Wm)("div",Y,[(0,i.Wm)("div",A,[(0,i.Wm)("div",C,[Q.matchMime(e.type,"image/*")?((0,i.wg)(),(0,i.j4)("img",{key:0,src:e.url,class:"rounded object-contain h-24 max-w-full"},null,8,["src"])):((0,i.wg)(),(0,i.j4)("div",$,[(0,i.Wm)(T,{icon:"document",size:"24"})]))])]),(0,i.wy)((0,i.Wm)("div",q,[(0,i.Wm)("p",E,(0,t.zw)(e.name),1)],512),[[J,e.name]])])])))),128))])]))}},T=Q}}]);