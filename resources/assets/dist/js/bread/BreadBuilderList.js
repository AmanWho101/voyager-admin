"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6854],{8008:(e,l,o)=>{o.r(l),o.d(l,{default:()=>Q});var t=o(6252),n=o(3577),a=o(9963);const i={class:"voyager-table striped mt-0"},u=(0,t.Wm)("th",{class:"hidden md:table-cell"},null,-1),s={class:"hidden md:table-cell"},d={class:"hidden md:table-cell"},r={class:"hidden md:table-cell"},m={class:"hidden md:table-cell"},c={class:"hidden md:table-cell"},p={class:"hidden md:table-cell"},_={class:"flex justify-end"},g={class:"hidden md:table-cell dd-handle cursor-move"},y={class:"h-5 w-5"},b={class:"hidden md:table-cell"},w={class:"inline-flex items-center space-x-1"},W={value:null},v={value:"edit"},h={value:"read"},f={class:"hidden md:table-cell"},k={class:"hidden md:table-cell"},z={class:"hidden md:table-cell"},V={class:"hidden md:table-cell"},U={class:"flex flex-no-wrap space-x-1 justify-end"},j={class:"input-group mt-2"},x={class:"label mt-4"},C={class:"input-group mt-2"},F={class:"label"},$={class:"button"},B={class:"voyager-table"},q={class:"flex justify-end"},H={value:null},M={value:"="},T={value:"!="},Y={value:">="},K={value:">"},I={value:"<="},L={value:"<"},P={value:"like"},R={class:"w-full"},S={class:"button"},A={class:"flex justify-end"};var G=o(9980);const O={components:{draggable:o.n(G)()},emits:["update:formfields","update:options","delete"],props:["computed","columns","relationships","formfields","options"],data(){return{colors:this.colors}},methods:{addFilter(){this.$refs.filters_collapsible.open();var e=this.options;this.isArray(e.filters)||(e.filters=[]),e.filters.push({name:"",column:null,operator:"=",value:"",color:"accent",icon:null}),this.$emit("update:options",e)},removeFilter(e){var l=this.options;l.filters.splice(e,1),this.$emit("update:options",l)},getRelatedBread(e){if("relationship"==e.type){let l=e.column.split(".")[0],o=this.relationships.where("method",l).first();if(o&&o.hasOwnProperty("bread")&&o.bread)return o.bread}return null}},render:function(e,l,o,G,O,Q){const D=(0,t.up)("Icon"),E=(0,t.up)("LanguageInput"),J=(0,t.up)("LocalePicker"),N=(0,t.up)("SlideIn"),X=(0,t.up)("draggable"),Z=(0,t.up)("ColorPicker"),ee=(0,t.up)("IconPicker"),le=(0,t.up)("Modal"),oe=(0,t.up)("Collapsible"),te=(0,t.Q2)("tooltip");return(0,t.wg)(),(0,t.j4)("div",null,[(0,t.Wm)("div",i,[(0,t.Wm)("table",null,[(0,t.Wm)("thead",null,[(0,t.Wm)("tr",null,[u,(0,t.Wm)("th",s,(0,n.zw)(e.__("voyager::generic.type")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.column")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.title")),1),(0,t.Wm)("th",d,(0,n.zw)(e.__("voyager::builder.link_to")),1),(0,t.Wm)("th",r,(0,n.zw)(e.__("voyager::builder.searchable")),1),(0,t.Wm)("th",m,(0,n.zw)(e.__("voyager::builder.orderable")),1),(0,t.Wm)("th",c,(0,n.zw)(e.__("voyager::builder.order_default")),1),(0,t.Wm)("th",p,(0,n.zw)(e.__("voyager::generic.translatable")),1),(0,t.Wm)("th",_,(0,n.zw)(e.__("voyager::generic.actions")),1)])]),(0,t.Wm)(X,{tag:"tbody",modelValue:o.formfields,"onUpdate:modelValue":l[2]||(l[2]=l=>e.$emit("update:formfields",l)),"item-key":""},{item:(0,t.w5)((({element:i,index:u})=>[(0,t.Wm)("tr",null,[(0,t.wy)((0,t.Wm)("td",g,[(0,t.Wm)("div",y,[(0,t.Wm)(D,{icon:"selector"})])],512),[[te,e.__("voyager::generic.move")]]),(0,t.Wm)("td",b,(0,n.zw)(e.getFormfieldByType(i.type).name),1),(0,t.Wm)("td",null,[(0,t.wy)((0,t.Wm)("select",{class:"input small w-full","onUpdate:modelValue":e=>i.column=e},[e.getFormfieldByType(i.type).allow_columns?((0,t.wg)(),(0,t.j4)("optgroup",{key:0,label:e.__("voyager::builder.columns")},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.columns,((e,l)=>((0,t.wg)(),(0,t.j4)("option",{key:"column_"+l,value:{column:e,type:"column"}},(0,n.zw)(e),9,["value"])))),128))],8,["label"])):(0,t.kq)("v-if",!0),e.getFormfieldByType(i.type).allow_computed_props&&o.computed.length>0?((0,t.wg)(),(0,t.j4)("optgroup",{key:1,label:e.__("voyager::builder.computed")},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.computed,((e,l)=>((0,t.wg)(),(0,t.j4)("option",{key:"computed_"+l,value:{column:e,type:"computed"}},(0,n.zw)(e),9,["value"])))),128))],8,["label"])):(0,t.kq)("v-if",!0),((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.relationships,((l,o)=>((0,t.wg)(),(0,t.j4)(t.HY,{key:"relationship_"+o},[e.getFormfieldByType(i.type).allow_relationship_props?((0,t.wg)(),(0,t.j4)("optgroup",{key:0,label:l.method},[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(l.columns,((e,o)=>((0,t.wg)(),(0,t.j4)("option",{key:"column_"+o,value:{column:l.method+"."+e,type:"relationship"}},(0,n.zw)(l.method+"."+e),9,["value"])))),128))],8,["label"])):(0,t.kq)("v-if",!0)],64)))),128))],8,["onUpdate:modelValue"]),[[a.bM,i.column]])]),(0,t.Wm)("td",null,[(0,t.Wm)(E,{class:"input small w-full",type:"text",placeholder:"Title",modelValue:i.title,"onUpdate:modelValue":e=>i.title=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)("td",w,[(0,t.wy)((0,t.Wm)("select",{class:"input small w-full","onUpdate:modelValue":e=>i.link_to=e,disabled:null===Q.getRelatedBread(i.column)&&"relationship"==i.column.type},[(0,t.Wm)("option",W,(0,n.zw)(e.__("voyager::generic.nothing")),1),(0,t.Wm)("option",v,(0,n.zw)(e.__("voyager::generic.edit")),1),(0,t.Wm)("option",h,(0,n.zw)(e.__("voyager::generic.read")),1)],8,["onUpdate:modelValue","disabled"]),[[a.bM,i.link_to]]),null!==Q.getRelatedBread(i.column)?(0,t.wy)(((0,t.wg)(),(0,t.j4)(D,{key:0,icon:"information-circle",size:6},null,512)),[[te,e.__("voyager::builder.links_to_bread")]]):(0,t.kq)("v-if",!0),null===Q.getRelatedBread(i.column)&&"relationship"==i.column.type?(0,t.wy)(((0,t.wg)(),(0,t.j4)(D,{key:1,icon:"information-circle",size:6,class:"text-red-500"},null,512)),[[te,e.__("voyager::builder.cannot_link")]]):(0,t.kq)("v-if",!0)]),(0,t.Wm)("td",f,[(0,t.wy)((0,t.Wm)("input",{class:"input",type:"checkbox","onUpdate:modelValue":e=>i.searchable=e},null,8,["onUpdate:modelValue"]),[[a.e8,i.searchable]])]),(0,t.Wm)("td",k,[(0,t.wy)((0,t.Wm)("input",{class:"input",type:"checkbox","onUpdate:modelValue":e=>i.orderable=e,disabled:"column"!==i.column.type},null,8,["onUpdate:modelValue","disabled"]),[[a.e8,i.orderable]])]),(0,t.Wm)("td",z,[(0,t.wy)((0,t.Wm)("input",{class:"input",type:"radio",disabled:"column"!==i.column.type,checked:o.options.default_order_column&&o.options.default_order_column==i.column,"onUpdate:modelValue":l[1]||(l[1]=e=>o.options.default_order_column=e),value:i.column},null,8,["disabled","checked","value"]),[[a.G2,o.options.default_order_column]])]),(0,t.Wm)("td",V,[(0,t.wy)((0,t.Wm)("input",{type:"checkbox",class:"input","onUpdate:modelValue":e=>i.translatable=e,disabled:!e.getFormfieldByType(i.type).can_be_translated},null,8,["onUpdate:modelValue","disabled"]),[[a.e8,i.translatable]])]),(0,t.Wm)("td",U,[(0,t.Wm)(N,{title:e.__("voyager::generic.options")},{actions:(0,t.w5)((()=>[(0,t.Wm)(J)])),opener:(0,t.w5)((()=>[(0,t.Wm)("button",$,[(0,t.Wm)(D,{icon:"cog"}),(0,t.Wm)("span",null,(0,n.zw)(e.__("voyager::generic.options")),1)])])),default:(0,t.w5)((()=>[((0,t.wg)(),(0,t.j4)((0,t.LL)(e.getFormfieldByType(i.type).builder_component),{options:i.options,"onUpdate:options":e=>i.options=e,column:i.column,columns:o.columns,action:"list-options"},null,8,["options","onUpdate:options","column","columns"])),(0,t.Wm)("div",j,[(0,t.Wm)("label",x,(0,n.zw)(e.__("voyager::generic.component")),1),(0,t.wy)((0,t.Wm)("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>i.component=e},null,8,["onUpdate:modelValue"]),[[a.nr,i.component]])]),(0,t.Wm)("div",C,[(0,t.Wm)("label",F,(0,n.zw)(e.__("voyager::generic.classes")),1),(0,t.wy)((0,t.Wm)("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>i.options.classes=e},null,8,["onUpdate:modelValue"]),[[a.nr,i.options.classes]])])])),_:2},1032,["title"]),(0,t.Wm)("button",{class:"button",onClick:l=>e.$emit("delete",u)},[(0,t.Wm)(D,{icon:"trash",class:"text-red-500"}),(0,t.Wm)("span",null,(0,n.zw)(e.__("voyager::generic.delete")),1)],8,["onClick"])])])])),_:1},8,["modelValue"])])]),(0,t.Wm)(oe,{title:`${e.__("voyager::generic.filters")} (${o.options.filters.length||0})`,closed:"",ref:"filters_collapsible"},{actions:(0,t.w5)((()=>[(0,t.Wm)("button",{class:"button small",onClick:l[3]||(l[3]=(0,a.iM)(((...e)=>Q.addFilter&&Q.addFilter(...e)),["stop"]))},[(0,t.Wm)(D,{icon:"plus",class:"text-green-500"})])])),default:(0,t.w5)((()=>[(0,t.Wm)("div",B,[(0,t.Wm)("table",null,[(0,t.Wm)("thead",null,[(0,t.Wm)("tr",null,[(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.name")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.column")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.operator")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::builder.value_or_scope")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.color")),1),(0,t.Wm)("th",null,(0,n.zw)(e.__("voyager::generic.icon")),1),(0,t.Wm)("th",q,(0,n.zw)(e.__("voyager::generic.actions")),1)])]),(0,t.Wm)("tbody",null,[((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.options.filters,((l,i)=>((0,t.wg)(),(0,t.j4)("tr",{key:"filter-"+i},[(0,t.Wm)("td",null,[(0,t.Wm)(E,{class:"input small w-full",type:"text",placeholder:e.__("voyager::generic.name"),modelValue:l.name,"onUpdate:modelValue":e=>l.name=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),(0,t.Wm)("td",null,[(0,t.wy)((0,t.Wm)("select",{class:"input small w-full","onUpdate:modelValue":e=>l.column=e},[(0,t.Wm)("option",H,(0,n.zw)(e.__("voyager::generic.none")),1),((0,t.wg)(!0),(0,t.j4)(t.HY,null,(0,t.Ko)(o.columns,(e=>((0,t.wg)(),(0,t.j4)("option",{key:e},(0,n.zw)(e),1)))),128))],8,["onUpdate:modelValue"]),[[a.bM,l.column]])]),(0,t.Wm)("td",null,[(0,t.wy)((0,t.Wm)("select",{class:"input small w-full","onUpdate:modelValue":e=>l.operator=e,disabled:null===l.column},[(0,t.Wm)("option",M,(0,n.zw)(e.__("voyager::builder.operators.equals")),1),(0,t.Wm)("option",T,(0,n.zw)(e.__("voyager::builder.operators.not_equals")),1),(0,t.Wm)("option",Y,(0,n.zw)(e.__("voyager::builder.operators.bigger_than")),1),(0,t.Wm)("option",K,(0,n.zw)(e.__("voyager::builder.operators.bigger")),1),(0,t.Wm)("option",I,(0,n.zw)(e.__("voyager::builder.operators.smaller_than")),1),(0,t.Wm)("option",L,(0,n.zw)(e.__("voyager::builder.operators.smaller")),1),(0,t.Wm)("option",P,(0,n.zw)(e.__("voyager::builder.operators.like")),1)],8,["onUpdate:modelValue","disabled"]),[[a.bM,l.operator]])]),(0,t.Wm)("td",null,[(0,t.wy)((0,t.Wm)("input",{type:"text",class:"input small w-full","onUpdate:modelValue":e=>l.value=e},null,8,["onUpdate:modelValue"]),[[a.nr,l.value]])]),(0,t.Wm)("td",null,[(0,t.Wm)(Z,{modelValue:l.color,"onUpdate:modelValue":e=>l.color=e,size:2,"add-none":""},null,8,["modelValue","onUpdate:modelValue"])]),(0,t.Wm)("td",null,[(0,t.Wm)(le,{ref:`filter_icon_modal_${i}`,title:e.__("voyager::generic.select_icon")},{opener:(0,t.w5)((()=>[(0,t.Wm)("div",R,[(0,t.Wm)("button",S,[(0,t.Wm)(D,{class:"my-1 content-center",icon:l.icon?l.icon:"ban",key:i+(l.icon?l.icon:"ban")},null,8,["icon"])])])])),actions:(0,t.w5)((()=>[(0,t.Wm)("button",{class:"button",onClick:o=>{l.icon=null,e.$refs["filter_icon_modal_"+i].close()}},(0,n.zw)(e.__("voyager::generic.none")),9,["onClick"])])),default:(0,t.w5)((()=>[(0,t.Wm)(ee,{onSelect:o=>{l.icon=o,e.$refs[`filter_icon_modal_${i}`].close()}},null,8,["onSelect"])])),_:2},1032,["title"])]),(0,t.Wm)("td",A,[(0,t.Wm)("button",{class:"button small",onClick:(0,a.iM)((e=>Q.removeFilter(i)),["stop"])},[(0,t.Wm)(D,{icon:"trash",class:"text-red-500"})],8,["onClick"])])])))),128))])])])])),_:1},8,["title"])])}},Q=O}}]);