"use strict";(self.webpackChunkvoyager_admin=self.webpackChunkvoyager_admin||[]).push([[6854],{8687:(e,l,t)=>{t.r(l),t.d(l,{default:()=>ce});var o=t(6252),a=t(3577),n=t(9963);const i={class:"voyager-table striped mt-0"},s=(0,o._)("th",{class:"hidden md:table-cell"},null,-1),r={class:"hidden md:table-cell"},d={class:"hidden md:table-cell"},u={class:"hidden md:table-cell"},c={class:"hidden md:table-cell"},p={class:"hidden md:table-cell"},_={class:"hidden md:table-cell"},m={class:"flex justify-end"},g={class:"hidden md:table-cell dd-handle cursor-move"},y={class:"h-5 w-5"},b={class:"hidden md:table-cell"},v=["onUpdate:modelValue"],h=["label"],f=["value"],w=["label"],D=["value"],k=["label"],S=["value"],V={class:"inline-flex items-center space-x-1"},U=["onUpdate:modelValue","disabled"],x={value:null},M={value:"edit"},W={value:"read"},C={class:"hidden md:table-cell"},F=["onUpdate:modelValue"],T={class:"hidden md:table-cell"},$=["onUpdate:modelValue","disabled"],B={class:"hidden md:table-cell"},j=["disabled","checked","value"],q={class:"hidden md:table-cell"},H=["onUpdate:modelValue","disabled"],Y={class:"flex flex-no-wrap space-x-1 justify-end"},K={class:"input-group mt-2"},A={class:"label mt-4"},R=["onUpdate:modelValue"],I={class:"input-group mt-2"},L={class:"label"},O=["onUpdate:modelValue"],P={class:"button"},z={class:"voyager-table"},J={class:"flex justify-end"},N=["onUpdate:modelValue"],Q={value:null},Z=["onUpdate:modelValue","disabled"],E={value:"="},G={value:"!="},X={value:">="},ee={value:">"},le={value:"<="},te={value:"<"},oe={value:"like"},ae=["onUpdate:modelValue"],ne={class:"w-full"},ie={class:"button"},se=["onClick"],re={class:"flex justify-end"},de=["onClick"];const ue={components:{Draggable:t(3570).default},emits:["update:formfields","update:options","delete"],props:{computed:Array,columns:Array,relationships:Array,formfields:Array,options:Object},data(){return{colors:this.colors}},methods:{addFilter(){this.$refs.filters_collapsible.open();var e=this.options;this.isArray(e.filters)||(e.filters=[]),e.filters.push({name:"",column:null,operator:"=",value:"",color:"accent",icon:null}),this.$emit("update:options",e)},removeFilter(e){var l=this.options;l.filters.splice(e,1),this.$emit("update:options",l)},getRelatedBread(e){if("relationship"==e.type){let l=e.column.split(".")[0],t=this.relationships.where("method",l).first();if(t&&t.hasOwnProperty("bread")&&t.bread)return t.bread}return null}}};const ce=(0,t(3744).Z)(ue,[["render",function(e,l,t,ue,ce,pe){const _e=(0,o.up)("Icon"),me=(0,o.up)("LanguageInput"),ge=(0,o.up)("LocalePicker"),ye=(0,o.up)("SlideIn"),be=(0,o.up)("Draggable"),ve=(0,o.up)("ColorPicker"),he=(0,o.up)("IconPicker"),fe=(0,o.up)("Modal"),we=(0,o.up)("Collapsible"),De=(0,o.Q2)("tooltip");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",i,[(0,o._)("table",null,[(0,o._)("thead",null,[(0,o._)("tr",null,[s,(0,o._)("th",r,(0,a.toDisplayString)(e.__("voyager::generic.type")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.column")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.title")),1),(0,o._)("th",d,(0,a.toDisplayString)(e.__("voyager::builder.link_to")),1),(0,o._)("th",u,(0,a.toDisplayString)(e.__("voyager::builder.searchable")),1),(0,o._)("th",c,(0,a.toDisplayString)(e.__("voyager::builder.orderable")),1),(0,o._)("th",p,(0,a.toDisplayString)(e.__("voyager::builder.order_default")),1),(0,o._)("th",_,(0,a.toDisplayString)(e.__("voyager::generic.translatable")),1),(0,o._)("th",m,(0,a.toDisplayString)(e.__("voyager::generic.actions")),1)])]),(0,o.Wm)(be,{tag:"tbody",itemTag:"tr",modelValue:t.formfields,"onUpdate:modelValue":l[2]||(l[2]=l=>e.$emit("update:formfields",JSON.parse(JSON.stringify(l)))),index:"uuid",handle:".dd-handle"},{item:(0,o.w5)((({item:i,index:s})=>[(0,o.wy)(((0,o.wg)(),(0,o.iD)("td",g,[(0,o._)("div",y,[(0,o.Wm)(_e,{icon:"selector"})])])),[[De,e.__("voyager::generic.move")]]),(0,o._)("td",b,(0,a.toDisplayString)(e.getFormfieldByType(i.type).name),1),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"input small w-full","onUpdate:modelValue":e=>i.column=e},[e.getFormfieldByType(i.type).allow_columns?((0,o.wg)(),(0,o.iD)("optgroup",{key:0,label:e.__("voyager::builder.columns")},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.columns,((e,l)=>((0,o.wg)(),(0,o.iD)("option",{key:"column_"+l,value:{column:e,type:"column"}},(0,a.toDisplayString)(e),9,f)))),128))],8,h)):(0,o.kq)("v-if",!0),e.getFormfieldByType(i.type).allow_computed_props&&t.computed.length>0?((0,o.wg)(),(0,o.iD)("optgroup",{key:1,label:e.__("voyager::builder.computed")},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.computed,((e,l)=>((0,o.wg)(),(0,o.iD)("option",{key:"computed_"+l,value:{column:e,type:"computed"}},(0,a.toDisplayString)(e),9,D)))),128))],8,w)):(0,o.kq)("v-if",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.relationships,((l,t)=>((0,o.wg)(),(0,o.iD)(o.HY,{key:"relationship_"+t},[e.getFormfieldByType(i.type).allow_relationship_props?((0,o.wg)(),(0,o.iD)("optgroup",{key:0,label:l.method},[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.columns,((e,t)=>((0,o.wg)(),(0,o.iD)("option",{key:"column_"+t,value:{column:l.method+"."+e,type:"relationship"}},(0,a.toDisplayString)(l.method+"."+e),9,S)))),128))],8,k)):(0,o.kq)("v-if",!0)],64)))),128))],8,v),[[n.vModelSelect,i.column]])]),(0,o._)("td",null,[(0,o.Wm)(me,{class:"input small w-full",type:"text",placeholder:"Title",modelValue:i.title,"onUpdate:modelValue":e=>i.title=e},null,8,["modelValue","onUpdate:modelValue"])]),(0,o._)("td",V,[(0,o.wy)((0,o._)("select",{class:"input small w-full","onUpdate:modelValue":e=>i.link_to=e,disabled:null===pe.getRelatedBread(i.column)&&"relationship"==i.column.type},[(0,o._)("option",x,(0,a.toDisplayString)(e.__("voyager::generic.nothing")),1),(0,o._)("option",M,(0,a.toDisplayString)(e.__("voyager::generic.edit")),1),(0,o._)("option",W,(0,a.toDisplayString)(e.__("voyager::generic.read")),1)],8,U),[[n.vModelSelect,i.link_to]]),null!==pe.getRelatedBread(i.column)?(0,o.wy)(((0,o.wg)(),(0,o.j4)(_e,{key:0,icon:"information-circle",size:6},null,512)),[[De,e.__("voyager::builder.links_to_bread")]]):(0,o.kq)("v-if",!0),null===pe.getRelatedBread(i.column)&&"relationship"==i.column.type?(0,o.wy)(((0,o.wg)(),(0,o.j4)(_e,{key:1,icon:"information-circle",size:6,class:"text-red-500"},null,512)),[[De,e.__("voyager::builder.cannot_link")]]):(0,o.kq)("v-if",!0)]),(0,o._)("td",C,[(0,o.wy)((0,o._)("input",{class:"input",type:"checkbox","onUpdate:modelValue":e=>i.searchable=e},null,8,F),[[n.vModelCheckbox,i.searchable]])]),(0,o._)("td",T,[(0,o.wy)((0,o._)("input",{class:"input",type:"checkbox","onUpdate:modelValue":e=>i.orderable=e,disabled:"column"!==i.column.type},null,8,$),[[n.vModelCheckbox,i.orderable]])]),(0,o._)("td",B,[(0,o.wy)((0,o._)("input",{class:"input",type:"radio",disabled:"column"!==i.column.type,checked:t.options.default_order_column&&t.options.default_order_column==i.column,"onUpdate:modelValue":l[0]||(l[0]=e=>t.options.default_order_column=e),value:i.column},null,8,j),[[n.vModelRadio,t.options.default_order_column]])]),(0,o._)("td",q,[(0,o.wy)((0,o._)("input",{type:"checkbox",class:"input","onUpdate:modelValue":e=>i.translatable=e,disabled:!e.getFormfieldByType(i.type).can_be_translated},null,8,H),[[n.vModelCheckbox,i.translatable]])]),(0,o._)("td",Y,[(0,o.Wm)(ye,{title:e.__("voyager::generic.options")},{actions:(0,o.w5)((()=>[(0,o.Wm)(ge)])),opener:(0,o.w5)((()=>[(0,o._)("button",P,[(0,o.Wm)(_e,{icon:"cog"}),(0,o._)("span",null,(0,a.toDisplayString)(e.__("voyager::generic.options")),1)])])),default:(0,o.w5)((()=>[((0,o.wg)(),(0,o.j4)((0,o.LL)(e.getFormfieldByType(i.type).builder_component),{options:i.options,"onUpdate:options":e=>i.options=e,column:i.column,columns:t.columns,action:"list-options"},null,8,["options","onUpdate:options","column","columns"])),(0,o._)("div",K,[(0,o._)("label",A,(0,a.toDisplayString)(e.__("voyager::generic.component")),1),(0,o.wy)((0,o._)("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>i.component=e},null,8,R),[[n.vModelText,i.component]])]),(0,o._)("div",I,[(0,o._)("label",L,(0,a.toDisplayString)(e.__("voyager::generic.classes")),1),(0,o.wy)((0,o._)("input",{type:"text",class:"input w-full","onUpdate:modelValue":e=>i.options.classes=e},null,8,O),[[n.vModelText,i.options.classes]])])])),_:2},1032,["title"]),(0,o._)("button",{class:"button",onClick:l[1]||(l[1]=l=>e.$emit("delete",e.key))},[(0,o.Wm)(_e,{icon:"trash",class:"text-red-500"}),(0,o._)("span",null,(0,a.toDisplayString)(e.__("voyager::generic.delete")),1)])])])),_:1},8,["modelValue"])])]),(0,o.Wm)(we,{title:`${e.__("voyager::generic.filters")} (${t.options.filters.length||0})`,closed:"",ref:"filters_collapsible"},{actions:(0,o.w5)((()=>[(0,o._)("button",{class:"button small",onClick:l[3]||(l[3]=(0,n.withModifiers)(((...e)=>pe.addFilter&&pe.addFilter(...e)),["stop"]))},[(0,o.Wm)(_e,{icon:"plus",class:"text-green-500"})])])),default:(0,o.w5)((()=>[(0,o._)("div",z,[(0,o._)("table",null,[(0,o._)("thead",null,[(0,o._)("tr",null,[(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.name")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.column")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.operator")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::builder.value_or_scope")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.color")),1),(0,o._)("th",null,(0,a.toDisplayString)(e.__("voyager::generic.icon")),1),(0,o._)("th",J,(0,a.toDisplayString)(e.__("voyager::generic.actions")),1)])]),(0,o._)("tbody",null,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.options.filters,((l,i)=>((0,o.wg)(),(0,o.iD)("tr",{key:"filter-"+i},[(0,o._)("td",null,[(0,o.Wm)(me,{class:"input small w-full",type:"text",placeholder:e.__("voyager::generic.name"),modelValue:l.name,"onUpdate:modelValue":e=>l.name=e},null,8,["placeholder","modelValue","onUpdate:modelValue"])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"input small w-full","onUpdate:modelValue":e=>l.column=e},[(0,o._)("option",Q,(0,a.toDisplayString)(e.__("voyager::generic.none")),1),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.columns,(e=>((0,o.wg)(),(0,o.iD)("option",{key:e},(0,a.toDisplayString)(e),1)))),128))],8,N),[[n.vModelSelect,l.column]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("select",{class:"input small w-full","onUpdate:modelValue":e=>l.operator=e,disabled:null===l.column},[(0,o._)("option",E,(0,a.toDisplayString)(e.__("voyager::builder.operators.equals")),1),(0,o._)("option",G,(0,a.toDisplayString)(e.__("voyager::builder.operators.not_equals")),1),(0,o._)("option",X,(0,a.toDisplayString)(e.__("voyager::builder.operators.bigger_than")),1),(0,o._)("option",ee,(0,a.toDisplayString)(e.__("voyager::builder.operators.bigger")),1),(0,o._)("option",le,(0,a.toDisplayString)(e.__("voyager::builder.operators.smaller_than")),1),(0,o._)("option",te,(0,a.toDisplayString)(e.__("voyager::builder.operators.smaller")),1),(0,o._)("option",oe,(0,a.toDisplayString)(e.__("voyager::builder.operators.like")),1)],8,Z),[[n.vModelSelect,l.operator]])]),(0,o._)("td",null,[(0,o.wy)((0,o._)("input",{type:"text",class:"input small w-full","onUpdate:modelValue":e=>l.value=e},null,8,ae),[[n.vModelText,l.value]])]),(0,o._)("td",null,[(0,o.Wm)(ve,{modelValue:l.color,"onUpdate:modelValue":e=>l.color=e,size:2,"add-none":""},null,8,["modelValue","onUpdate:modelValue"])]),(0,o._)("td",null,[(0,o.Wm)(fe,{ref_for:!0,ref:`filter_icon_modal_${i}`,title:e.__("voyager::generic.select_icon")},{opener:(0,o.w5)((()=>[(0,o._)("div",ne,[(0,o._)("button",ie,[((0,o.wg)(),(0,o.j4)(_e,{class:"my-1 content-center",icon:l.icon?l.icon:"ban",key:i+(l.icon?l.icon:"ban")},null,8,["icon"]))])])])),actions:(0,o.w5)((()=>[(0,o._)("button",{class:"button",onClick:t=>{l.icon=null,e.$refs["filter_icon_modal_"+i].close()}},(0,a.toDisplayString)(e.__("voyager::generic.none")),9,se)])),default:(0,o.w5)((()=>[(0,o.Wm)(he,{onSelect:t=>{l.icon=t,e.$refs[`filter_icon_modal_${i}`].close()}},null,8,["onSelect"])])),_:2},1032,["title"])]),(0,o._)("td",re,[(0,o._)("button",{class:"button small",onClick:(0,n.withModifiers)((e=>pe.removeFilter(i)),["stop"])},[(0,o.Wm)(_e,{icon:"trash",class:"text-red-500"})],8,de)])])))),128))])])])])),_:1},8,["title"])])}]])}}]);